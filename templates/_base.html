<!DOCTYPE html>

{% load static %}
{% load tz %}
{#{% load compress %}#}

<html class="h-full bg-background-pattern bg-no-repeat bg-fixed" data-theme="mgtheme" lang="en"
      prefix="og: https://ogp.me/ns#">

<head>
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'apple-touch-icon.png' %}">
    <link rel="mask-icon" href="{% static 'safari-pinned-tab.svg' %}" color="#5bbad5">
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    <meta name="msapplication-TileColor" content="#b91d47">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% block meta %}
        <meta name="robots" content="noindex, nofollow">
    {% endblock %}

    {#    {% compress css %}#}
    <link rel="stylesheet" href="{% static '@fortawesome/fontawesome-free/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'flatpickr/dist/flatpickr.min.css' %}">

    <link rel="stylesheet" href="{% static 'css/output.css' %}">

    {#    {% endcompress %}#}

    {% block css %}{% endblock %}

    <title>
        {% block head_title %}{{ page_title }}{% endblock %}
    </title>

    <meta property="og:site_name" content="Mennoniten Gemeinde"/>
    <meta property="og:title" content="{{ page_title }}"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://mennonitengemeinde.org{{ request.get_full_path }}"/>
    <meta property="og:image" content="https://mennonitengemeinde.org{% static 'android-chrome-512x512.png' %}"/>

    <script src="{% static 'htmx.org/dist/htmx.min.js' %}"></script>
    <script defer src="{% static 'alpinejs/dist/cdn.min.js' %}"></script>
    {#  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>#}
</head>

<body class="flex flex-col h-full font-sans">
{% block body %}{% endblock %}

{#{% compress js %}#}
<script src="{% static 'dayjs/dayjs.min.js' %}"></script>
<script src="{% static 'js/timezoneService.js' %}"></script>
<script src="{% static 'flatpickr/dist/flatpickr.min.js' %}"></script>
<script src="{% static 'js/site.js' %}"></script>
{#{% if not user_timezone %}#}
<script>
    window.addEventListener('load', () => {
        const serverTimezone = '{{ user_timezone }}';
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        console.log('server timezone: ' + serverTimezone);
        console.log('client timezone: ' + timezone);
        if (serverTimezone !== timezone) {
            setTimezone(timezone);
        }
    });
</script>
{#{% endif %}#}

{#{% endcompress %}#}

{% block js %}{% endblock %}

</body>

</html>